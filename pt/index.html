<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Green-Therapy – CBD Premium</title>
  <meta name="description" content="Especialista em CBD premium desde 2019: flores, resinas, óleos e infusões de alta qualidade. Produtos naturais selecionados em Itália.">
  <meta name="robots" content="index, follow">
  <meta name="author" content="Green-Therapy">
  <link rel="icon" href="../favicon.ico" type="image/x-icon" />

  <!-- Pré-conexão CDN -->
  <link rel="preconnect" href="https://cdn.snipcart.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>

  <!-- CSS principal -->
  <link rel="stylesheet" href="../style.css" />

  <!-- CSS Snipcart pré-carregado -->
  <link rel="preload" href="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.css" as="style" onload="this.onload=null;this.rel='stylesheet';"/>
  <noscript><link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.css" /></noscript>

  <!-- Configuração Snipcart -->
  <script>
    window.SnipcartSettings = {
      publicApiKey: "MjUwNWU1NDctZmQwOC00YmEwLTlkMTItMWMxZmYyYWI5MzdhNjM4ODk3NzU4MjkzMjE0MDQ3",
      loadStrategy: "on-user-interaction"
    };
  </script>

  <!-- Estilos locais -->
  <style>
    .header-panier{ text-align:left; margin-top:10px; margin-left:100px; }
    .panier-btn{ background:none; border:none; color:#d4af37; font-size:16px; cursor:pointer; }

    .product-card .cta-cart{
      background:#000; color:#d4af37; font-weight:700; padding:8px 12px;
      border-radius:8px; border:1px solid #000; cursor:pointer;
      transition:opacity .2s ease; display:inline-flex; align-items:center; gap:.5rem;
    }
    .product-card .cta-cart:hover{ opacity:.9; }

    .stock-label{ margin-top:6px; font-size:.9rem; }
    .stock-out{ color:#b00020; }
    .stock-in{ color:#2e7d32; }
    .btn-disabled{ opacity:.55; cursor:not-allowed; }

    .info-notes{
      max-width: 760px;
      margin: .35rem auto .6rem;
      text-align: center;
    }
    .info-notes .rule{
      width:56px; height:2px; background:#e8e8e8; border-radius:2px;
      margin:.4rem auto .6rem;
    }
    .legal-note{ font-size:.95rem; opacity:.88; margin:0; }
    .legal-sub{ font-size:1.05rem; margin:.25rem 0 0; }
    .shipping-note{
      margin:.15rem 0 0;
      font-size:.95rem; line-height:1.45;
    }
    .shipping-note .label{
      font-variant:all-small-caps; letter-spacing:.04em; color:#8c7a49;
    }
    .shipping-note .price{ font-weight:700; color:#d4af37; }
    .nowrap{ white-space:nowrap; }
  </style>
</head>

<body>
  <!-- Header -->
  <header>
    <div class="logo-container">
      <img src="../logo-rond.png" alt="Logo Green Therapy - CBD Premium" class="logo" loading="lazy" width="80" height="80" />
      <h1>Green-Therapy</h1>
    </div>

    <nav>
      <a href="#home">🏠 Início</a>
      <a href="#produtos">🛍️ Produtos</a>
      <a href="#contacto">✉️ Contacto</a>
      <a href="../index.html" hreflang="fr">🇫🇷 Francês</a>
    </nav>

    <div class="header-panier">
      <button class="snipcart-checkout panier-btn">🛒 Ver carrinho</button>
    </div>
  </header>

  <!-- Início -->
  <section id="home" class="section">
    <h2>
      <span style="display:inline-block; text-align:center;">
        <span style="display:block;">🌿 Green-Therapy 🌿</span>
        <span style="display:block;">CBD Premium</span>
      </span>
    </h2>
    <p>Especialista em CBD desde 2019, selecionamos na Itália flores de CBD premium, óleos de CBD full spectrum, resinas e infusões. Descubra produtos naturais e de qualidade para um momento de relaxamento autêntico.</p>
  </section>

  <!-- Produtos -->
  <section id="produtos" class="section">
    <h2>🛍️ Nossos Produtos</h2>

    <div class="info-notes">
      <p class="legal-note">Conforme a legislação da UE: <span class="nowrap"><strong>THC &lt; 0,3%</strong></span></p>
      <p class="legal-sub">sem efeitos psicoativos</p>
      <div class="rule"></div>
      <p class="shipping-note"><span class="label">Entrega em Portugal pelos CTT</span> — Taxa fixa: <span class="price">4,90&nbsp;€</span></p>
    </div>

    <div class="product-grid">
      <!-- Produto 1 -->
      <div class="product-card" data-id="amnesia-cbd" data-stock="0">
        <picture>
          <source srcset="../amnesia-cbd.webp" type="image/webp" />
          <img src="../amnesia-cbd.jpg" alt="Flor CBD Amnesia - Itália" class="product-img" loading="lazy" width="400" height="400" />
        </picture>
        <h3>🌿 Flor CBD Amnesia 🇮🇹</h3>
        <p style="margin:.4rem 0 .2rem 0;">
          Perfil aromático cítrico e terroso, colhida e manicurada à mão em Itália.
          Secagem lenta que preserva a <em>cor natural do cânhamo</em> e o sabor autêntico.
          Perfeita para relaxar no final do dia. <strong>THC &lt; 0,3%</strong>.
        </p>
        <p class="price">A partir de 8,90 €</p>
        <select id="amnesia-quantidade" aria-label="Escolher quantidade para Flor CBD Amnesia">
          <option value="2" selected>2g – 8,90 €</option>
          <option value="4">4g – 17,00 €</option>
          <option value="6">6g – 24,00 €</option>
          <option value="8">8g – 30,00 €</option>
          <option value="10">10g – 40,00 €</option>
        </select>
        <button class="cta-cart" onclick="adicionarProduto('amnesia-cbd','Flor CBD Amnesia','Flor CBD premium da Itália','amnesia-quantidade')">
          🛒 Adicionar ao carrinho
        </button>
      </div>

      <!-- Produto 2 -->
      <div class="product-card" data-id="resina-cbd" data-stock="0">
        <picture>
          <source srcset="../resine-cbd.webp" type="image/webp" />
          <img src="../resine-cbd.jpg" alt="Resina CBD Hash - Itália" class="product-img" loading="lazy" width="400" height="400" />
        </picture>
        <h3>🌴 Resina CBD Hash 🇮🇹</h3>
        <p style="margin:.4rem 0 .2rem 0;">
          Textura cremosa e aromas de especiarias e pinho. Fabrico artesanal com
          <em>prensagem a frio</em> para preservar os terpenos. Origem Itália,
          sabor redondo e relaxante. <strong>THC &lt; 0,3%</strong>.
        </p>
        <p class="price">A partir de 7,50 €</p>
        <select id="resina-quantidade" aria-label="Escolher quantidade para Resina CBD Hash">
          <option value="2" selected>2g – 7,50 €</option>
          <option value="4">4g – 14,00 €</option>
          <option value="6">6g – 20,00 €</option>
          <option value="8">8g – 26,00 €</option>
          <option value="10">10g – 32,00 €</option>
        </select>
        <button class="cta-cart" onclick="adicionarProduto('resina-cbd','Resina CBD Hash','Resina CBD premium da Itália','resina-quantidade')">
          🛒 Adicionar ao carrinho
        </button>
      </div>

      <!-- Produto 3 -->
      <div class="product-card" data-id="cherry-cbd" data-stock="0">
        <picture>
          <source srcset="../cherry-cbd.webp" type="image/webp" />
          <img src="../cherry-cbd.jpg" alt="Flor CBD Cherry - Itália" class="product-img" loading="lazy" width="400" height="400" />
        </picture>
        <h3>🍒 Flor CBD Cherry 🇮🇹</h3>
        <p style="margin:.4rem 0 .2rem 0;">
          Notas frutadas de cereja madura, flores densas e resinosas.
          Cultivo controlado na Itália para um sabor suave e limpo, com final sedoso.
          <strong>THC &lt; 0,3%</strong>.
        </p>
        <p class="price">A partir de 9,50 €</p>
        <select id="cherry-quantidade" aria-label="Escolher quantidade para Flor CBD Cherry">
          <option value="2" selected>2g – 9,50 €</option>
          <option value="4">4g – 18,00 €</option>
          <option value="6">6g – 26,00 €</option>
          <option value="8">8g – 33,00 €</option>
          <option value="10">10g – 40,00 €</option>
        </select>
        <button class="cta-cart" onclick="adicionarProduto('cherry-cbd','Flor CBD Cherry','Flor CBD Cherry premium da Itália','cherry-quantidade')">
          🛒 Adicionar ao carrinho
        </button>
      </div>
    </div>
  </section>

  <!-- Contacto -->
  <section id="contacto" class="section">
    <h2>✉️ Contacto</h2>
    <p>Contacte-nos para qualquer questão ou pedido especial.</p>
    <p><a href="mailto:greentherapy06@gmail.com" title="Envie-nos um e-mail">📧 greentherapy06@gmail.com</a></p>
  </section>

  <!-- Snipcart -->
  <div hidden id="snipcart"
    data-api-key="MjUwNWU1NDctZmQwOC00YmEwLTlkMTItMWMxZmYyYWI5MzdhNjM4ODk3NzU4MjkzMjE0MDQ3"
    data-config-modal-style="side"
    data-currency="eur">
  </div>

  <!-- Script produtos -->
  <script>
    const precoPorProduto = {
      "amnesia-cbd": {2: 8.90, 4: 17.00, 6: 24.00, 8: 30.00, 10: 40.00},
      "resina-cbd":  {2: 7.50, 4: 14.00, 6: 20.00, 8: 26.00, 10: 32.00},
      "cherry-cbd":  {2: 9.50, 4: 18.00, 6: 26.00, 8: 33.00, 10: 40.00}
    };
    const TXT = { instock: 'Em stock: ', out: 'Esgotado' };

    function getStock(id) {
      const card = document.querySelector(`.product-card[data-id="${id}"]`);
      if (!card) return 0;
      const n = parseInt(card.getAttribute('data-stock'), 10);
      return isNaN(n) ? 0 : n;
    }
    function renderStocks(){
      document.querySelectorAll('.product-card').forEach(card => {
        const id = card.dataset.id; if (!id) return;
        let label = card.querySelector('.stock-label');
        if (!label){
          label = document.createElement('div');
          label.className = 'stock-label';
          card.appendChild(label);
        }
        const btn = card.querySelector('.cta-cart');
        const n = getStock(id);
        if (n <= 0){
          label.textContent = TXT.out;
          label.classList.remove('stock-in'); label.classList.add('stock-out');
          if (btn){ btn.setAttribute('disabled','disabled'); btn.classList.add('btn-disabled'); btn.title = TXT.out; }
        } else {
          label.textContent = TXT.instock + n;
          label.classList.remove('stock-out'); label.classList.add('stock-in');
          if (btn){ btn.removeAttribute('disabled'); btn.classList.remove('btn-disabled'); btn.removeAttribute('title'); }
        }
      });
    }
    document.addEventListener('DOMContentLoaded', renderStocks);

    function ensureSnipcartReady(cb){
      if (window.Snipcart && window.Snipcart.api) return cb();
      if (typeof loadSnipcart === 'function') loadSnipcart();
      const start = Date.now();
      const t = setInterval(() => {
        if (window.Snipcart && window.Snipcart.api) { clearInterval(t); cb(); }
        if (Date.now() - start > 5000) { clearInterval(t); }
      }, 100);
    }
    function adicionarProduto(idBase, nomeBase, descricao, selectId) {
      if (getStock(idBase) <= 0){ alert(TXT.out); return; }
      const quantidade = document.getElementById(selectId).value;
      const preco = precoPorProduto[idBase][quantidade];
      const id = `${idBase}-${quantidade}g`;
      const nome = `${nomeBase} ${quantidade}g`;
      ensureSnipcartReady(() => {
        Snipcart.api.cart.items.add({ id, name: nome, price: preco, url: '/', description: descricao });
      });
    }
  </script>

  <!-- Carregar Snipcart -->
  <script>
    let snipcartLoaded = false;
    function loadSnipcart() {
      if (snipcartLoaded) return;
      snipcartLoaded = true;
      const script = document.createElement("script");
      script.src = "https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.js";
      script.async = true;
      document.body.appendChild(script);
    }
    window.addEventListener("scroll", loadSnipcart, { once: true });
    document.addEventListener("click", loadSnipcart, { once: true });
  </script>

  <footer style="text-align:center; padding:20px; font-size:14px;">
    <a href="../termos-legais.html">Termos legais</a> |
    <a href="../politica-privacidade.html">Política de privacidade</a> |
    <a href="../cookies.html">Cookies</a>
  </footer>
</body>
</html>
