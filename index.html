<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Green-Therapy – CBD Premium</title>
  <meta name="description" content="Especialista em CBD premium desde 2019: flores, resinas, óleos e infusões de alta qualidade. Produtos naturais selecionados na Itália.">
  <meta name="robots" content="index, follow">
  <meta name="author" content="Green-Therapy">
  <link rel="icon" href="../favicon.ico" type="image/x-icon" />

  <!-- Pré-conexões -->
  <link rel="preconnect" href="https://cdn.snipcart.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">

  <!-- Hero en priorité -->
  <link rel="preload" as="image" href="../images.webp" fetchpriority="high">

  <!-- CSS principal (cache-bust) -->
  <link rel="stylesheet" href="../style.css?v=44" />

  <!-- Snipcart CSS (préchargé) -->
  <link rel="preload" href="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.css" as="style" onload="this.onload=null;this.rel='stylesheet';"/>
  <noscript><link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.css" /></noscript>

  <!-- Snipcart -->
  <script>
    window.SnipcartSettings = {
      publicApiKey: "MjUwNWU1NDctZmQwOC00YmEwLTlkMTItMWMxZmYyYWI5MzdhNjM4ODk3NzU4MjkzMjE0MDQ3",
      loadStrategy: "on-user-interaction"
    };
  </script>
</head>

<body>
  <!-- HEADER -->
  <header>
    <!-- Logo (seul dans le conteneur) -->
    <div class="logo-container">
      <img src="../logo-rond.png" alt="Logo Green Therapy - CBD Premium" class="logo" loading="lazy" width="80" height="80" />
    </div>

    <!-- Nom du site (centré, même markup que la version FR) -->
    <h1 class="brand-title">Green-Therapy</h1>

    <!-- Menu -->
    <nav>
      <a href="#home"> Início</a>
      <a href="#produits"> Produtos</a>
      <a href="#contact"> Contato</a>
      <a href="/fr/" hreflang="fr">🇨🇵 Francês</a>
    </nav>

    <!-- Panier -->
    <div class="header-panier">
      <button class="snipcart-checkout panier-btn">Ver carrinho</button>
    </div>
  </header>

  <!-- Início -->
  <section id="home" class="section">
    <h2>
      <span style="display:inline-block; text-align:center;">
        <span style="display:block;">🌿 Green-Therapy 🌿</span>
        <span style="display:block;">CBD Premium</span>
      </span>
    </h2>
    <p>Especialista em CBD desde 2019, selecionamos na Itália flores de CBD premium, óleos de CBD full spectrum, resinas e infusões. Descubra produtos naturais e de qualidade para um momento de relaxamento autêntico.</p>
  </section>

  <!-- Produtos -->
  <section id="produits" class="section">
    <h2>🛍️ Nossos Produtos</h2>

    <div class="info-notes">
      <p class="legal-note">Conforme a legislação da UE :</p>
      <p class="legal-mid"><span class="nowrap"><strong>THC &lt; 0,3% 🇪🇺</strong></span></p>
      <p class="legal-sub">sem efeitos psicoativos</p>
      <div class="rule"></div>
      <p class="shipping-note"><span class="label">Entrega em Portugal pelos CTT</span> — Taxa fixa: <span class="price">3,50&nbsp;€</span></p>
    </div>

    <div class="product-grid">
      <!-- Produto 1 -->
      <div class="product-card" data-id="amnesia-cbd" data-stock="10">
        <picture>
          <source srcset="../amnesia-cbd.webp" type="image/webp" />
          <img src="../amnesia-cbd.jpg" alt="Flor CBD Amnesia - Itália" class="product-img" loading="lazy" width="400" height="400" />
        </picture>
        <h3>🌿 Flor CBD Swett Amnesia 🇮🇹</h3>
        <p style="margin:.4rem 0 .2rem 0;">
          Perfil aromático cítrico e terroso, colhida e aparada à mão na Itália.
          Secagem lenta que preserva a <em>cor natural do cânhamo</em> e o sabor autêntico.
          Perfeita para relaxar no fim do dia. <strong>THC &lt; 0,3%</strong>.
        </p>
        <p class="price">A partir de 8,90 €</p>
        <select id="amnesia-quantite">
          <option value="2" selected>2g – 8,90 €</option>
          <option value="4">4g – 17,00 €</option>
          <option value="6">6g – 24,00 €</option>
          <option value="8">8g – 30,00 €</option>
          <option value="10">10g – 40,00 €</option>
        </select>
        <button class="cta-cart" onclick="ajouterProduit('amnesia-cbd','Flor CBD Amnesia','Flor CBD premium da Itália','amnesia-quantite')">
          🛒 Adicionar ao carrinho
        </button>
      </div>

      <!-- Produto 2 -->
      <div class="product-card" data-id="resine-cbd" data-stock="0">
        <picture>
          <source srcset="../resine-cbd.webp" type="image/webp" />
          <img src="../resine-cbd.jpg" alt="Resina CBD Hash - Itália" class="product-img" loading="lazy" width="400" height="400" />
        </picture>
        <h3>🌴 Resina CBD Hash 🇮🇹</h3>
        <p style="margin:.4rem 0 .2rem 0;">
          Textura cremosa e aromas de especiarias e pinho. Produção artesanal com
          <em>prensagem a frio</em> para conservar os terpenos. Origem Itália,
          sabor redondo e relaxante. <strong>THC &lt; 0,3%</strong>.
        </p>
        <p class="price">A partir de 7,50 €</p>
        <select id="resine-quantite">
          <option value="2" selected>2g – 7,50 €</option>
          <option value="4">4g – 14,00 €</option>
          <option value="6">6g – 20,00 €</option>
          <option value="8">8g – 26,00 €</option>
          <option value="10">10g – 32,00 €</option>
        </select>
        <button class="cta-cart" onclick="ajouterProduit('resine-cbd','Resina CBD Hash','Resina CBD premium da Itália','resine-quantite')">
          🛒 Adicionar ao carrinho
        </button>
      </div>

      <!-- Produto 3 -->
      <div class="product-card" data-id="cherry-cbd" data-stock="0">
        <picture>
          <source srcset="../cherry-cbd.webp" type="image/webp" />
          <img src="../cherry-cbd.jpg" alt="Flor CBD Cherry - Itália" class="product-img" loading="lazy" width="400" height="400" />
        </picture>
        <h3>🍒 Flor CBD Cherry 🇮🇹</h3>
        <p style="margin:.4rem 0 .2rem 0;">
          Notas frutadas de cereja madura, flores densas e resinosas.
          Cultivo controlado na Itália para um sabor doce e limpo, com final sedoso.
          <strong>THC &lt; 0,3%</strong>.
        </p>
        <p class="price">A partir de 9,50 €</p>
        <select id="cherry-quantite">
          <option value="2" selected>2g – 9,50 €</option>
          <option value="4">4g – 18,00 €</option>
          <option value="6">6g – 26,00 €</option>
          <option value="8">8g – 33,00 €</option>
          <option value="10">10g – 40,00 €</option>
        </select>
        <button class="cta-cart" onclick="ajouterProduit('cherry-cbd','Flor CBD Cherry','Flor CBD Cherry premium da Itália','cherry-quantite')">
          🛒 Adicionar ao carrinho
        </button>
      </div>

      <!-- Produto 4 -->
      <div class="product-card" data-id="charas-cbd" data-stock="0">
        <picture>
          <source srcset="../charas-cbd.webp" type="image/webp" />
          <img src="../charas-cbd.webp" alt="Resina Charas CBD - Itália" class="product-img" loading="lazy" width="400" height="400" />
        </picture>
        <h3>🖤 Resina Charas CBD 🇮🇹</h3>
        <p style="margin:.4rem 0 .2rem 0;">
          Charas artesanal com toque tradicional: notas terrosas e especiadas, textura macia,
          prensagem suave para preservar os terpenos. Origem Itália. <strong>THC &lt; 0,3%</strong>.
        </p>
        <p class="price">A partir de 8,90 €</p>
        <select id="charas-quantite" aria-label="Escolher a quantidade para Resina Charas CBD">
          <option value="2" selected>2g – 8,90 €</option>
          <option value="4">4g – 17,00 €</option>
          <option value="6">6g – 24,00 €</option>
          <option value="8">8g – 30,00 €</option>
          <option value="10">10g – 40,00 €</option>
        </select>
        <button class="cta-cart" onclick="ajouterProduit('charas-cbd','Resina Charas CBD','Resina Charas CBD artesanal da Itália','charas-quantite')">
          🛒 Adicionar ao carrinho
        </button>
      </div>

      <!-- Produto 5 -->
      <div class="product-card" data-id="cali-dream-cbd" data-stock="0">
        <picture>
          <source srcset="../cali-dream-cbd.webp" type="image/webp" />
          <img src="../cali-dream-cbd.webp" alt="Flor CBD Cali Dream - Itália" class="product-img" loading="lazy" width="400" height="400" />
        </picture>
        <h3>🌿 Flor CBD Cali Dream 🇮🇹</h3>
        <p style="margin:.4rem 0 .2rem 0;">
          Perfil aromático elegante com toques <em>florais e frutados</em>, final suave e limpo.
          Colheita e manicure à mão, secagem lenta para preservar os terpenos e a cor natural.
          Origem Itália. <strong>THC &lt; 0,3%</strong>.
        </p>
        <p class="price">A partir de 8,90 €</p>
        <select id="calidream-quantite" aria-label="Escolher a quantidade para Flor CBD Cali Dream">
          <option value="2" selected>2g – 8,90 €</option>
          <option value="4">4g – 17,00 €</option>
          <option value="6">6g – 24,00 €</option>
          <option value="8">8g – 30,00 €</option>
          <option value="10">10g – 40,00 €</option>
        </select>
        <button class="cta-cart" onclick="ajouterProduit('cali-dream-cbd','Flor CBD Cali Dream','Flor CBD premium da Itália','calidream-quantite')">
          🛒 Adicionar ao carrinho
        </button>
      </div>

      <!-- Produto 6 -->
      <div class="product-card" data-id="gelato-cbd" data-stock="0">
        <picture>
          <source srcset="../gelato-cbd.webp" type="image/webp" />
          <img src="../gelato-cbd.webp" alt="Flor CBD Gelato - Itália" class="product-img" loading="lazy" width="400" height="400" />
        </picture>
        <h3>🌿 Flor CBD Gelato 🇮🇹</h3>
        <p style="margin:.4rem 0 .2rem 0;">
          Perfil aromático cremoso com notas <em>doces e frutadas</em>, final suave e limpo.
          Colheita e manicure à mão, secagem lenta que preserva os terpenos e a cor natural.
          Origem Itália. <strong>THC &lt; 0,3%</strong>.
        </p>
        <p class="price">A partir de 8,90 €</p>
        <select id="gelato-quantite" aria-label="Escolher a quantidade para Flor CBD Gelato">
          <option value="2" selected>2g – 8,90 €</option>
          <option value="4">4g – 17,00 €</option>
          <option value="6">6g – 24,00 €</option>
          <option value="8">8g – 30,00 €</option>
          <option value="10">10g – 40,00 €</option>
        </select>
        <button class="cta-cart" onclick="ajouterProduit('gelato-cbd','Flor CBD Gelato','Flor CBD premium da Itália','gelato-quantite')">
          🛒 Adicionar ao carrinho
        </button>
      </div>
    </div>
  </section>

  <!-- Sobre nós -->
  <section id="about" class="section">
    <h2>ℹ️ Sobre nós</h2>
    <p>Desde 2019, a Green-Therapy é especializada em produtos de CBD premium. Trabalhamos exclusivamente com produtores selecionados na Itália para oferecer flores, resinas, óleos e infusões de qualidade superior, respeitando a legislação europeia. Nosso objetivo é proporcionar uma experiência autêntica, segura e natural a cada cliente.</p>
  </section>

  <!-- Opiniões -->
  <section id="avis" class="section">
    <h2>⭐ Opiniões de Clientes</h2>
    <div class="avis-grid">
      <div class="avis-card">
        <p class="avis-texte">“Entrega rápida e discreta, flores de qualidade excepcional. Recomendo 100%!”</p>
        <div class="avis-stars">⭐⭐⭐⭐⭐</div>
        <p class="avis-nom">– Julien M.</p>
      </div>
      <div class="avis-card">
        <p class="avis-texte">“Uma verdadeira descoberta! O óleo de CBD ajuda-me a dormir melhor. Atendimento excelente.”</p>
        <div class="avis-stars">⭐⭐⭐⭐⭐</div>
        <p class="avis-nom">– Sophie L.</p>
      </div>
      <div class="avis-card">
        <p class="avis-texte">“Excelente relação qualidade/preço. Sabor, aroma, relaxamento… tudo perfeito.”</p>
        <div class="avis-stars">⭐⭐⭐⭐⭐</div>
        <p class="avis-nom">– Karim B.</p>
      </div>
    </div>
  </section>

  <!-- Contato -->
  <section id="contact" class="section">
    <h2>✉️ Contato</h2>
    <p>Entre em contato conosco para qualquer dúvida ou pedido especial.</p>
    <p><a href="mailto:greentherapy06@gmail.com">📧 greentherapy06@gmail.com</a></p>
  </section>

  <!-- Snipcart (hidden) -->
  <div hidden id="snipcart"
    data-api-key="MjUwNWU1NDctZmQwOC00YmEwLTlkMTItMWMxZmYyYWI5MzdhNjM4ODk3NzU4MjkzMjE0MDQ3"
    data-config-modal-style="side"
    data-currency="eur">
  </div>

  <script>
    const prixParProduit = {
      "amnesia-cbd":    {2: 8.90, 4: 17.00, 6: 24.00, 8: 30.00, 10: 40.00},
      "resine-cbd":     {2: 7.50, 4: 14.00, 6: 20.00, 8: 26.00, 10: 32.00},
      "cherry-cbd":     {2: 9.50, 4: 18.00, 6: 26.00, 8: 33.00, 10: 40.00},
      "charas-cbd":     {2: 8.90, 4: 17.00, 6: 24.00, 8: 30.00, 10: 40.00},
      "cali-dream-cbd": {2: 8.90, 4: 17.00, 6: 24.00, 8: 30.00, 10: 40.00},
      "gelato-cbd":     {2: 8.90, 4: 17.00, 6: 24.00, 8: 30.00, 10: 40.00}
    };
    const LANG = (document.documentElement.lang || 'pt').toLowerCase();
    const TXT = LANG.startsWith('pt')
      ? { instock: 'Em stock: ', out: 'Esgotado' }
      : { instock: 'En stock : ', out: 'Rupture de stock' };

    function getStock(id) {
      const card = document.querySelector(`.product-card[data-id="${id}"]`);
      if (!card) return 0;
      const n = parseInt(card.getAttribute('data-stock'), 10);
      return isNaN(n) ? 0 : n;
    }

    function renderStocks(){
      document.querySelectorAll('.product-card').forEach(card => {
        const id = card.dataset.id; if (!id) return;
        let label = card.querySelector('.stock-label');
        if (!label){
          label = document.createElement('div');
          label.className = 'stock-label';
          card.appendChild(label);
        }
        const btn = card.querySelector('.cta-cart');
        const n = getStock(id);

        if (n <= 0){
          label.textContent = TXT.out;
          label.classList.remove('stock-in'); label.classList.add('stock-out');
          if (btn){ btn.setAttribute('disabled','disabled'); btn.classList.add('btn-disabled'); btn.title = TXT.out; }
        } else {
          label.textContent = TXT.instock + n;
          label.classList.remove('stock-out'); label.classList.add('stock-in');
          if (btn){ btn.removeAttribute('disabled'); btn.classList.remove('btn-disabled'); btn.removeAttribute('title'); }
        }
      });
    }
    document.addEventListener('DOMContentLoaded', renderStocks);

    function ensureSnipcartReady(cb){
      if (window.Snipcart && window.Snipcart.api) return cb();
      if (typeof loadSnipcart === 'function') loadSnipcart();
      const start = Date.now();
      const t = setInterval(() => {
        if (window.Snipcart && window.Snipcart.api) { clearInterval(t); cb(); }
        if (Date.now() - start > 5000) { clearInterval(t); }
      }, 100);
    }

    function ajouterProduit(idBase, nomBase, description, selectId) {
      if (getStock(idBase) <= 0){ alert(TXT.out); return; }
      const quantite = document.getElementById(selectId).value;
      const prix = prixParProduit[idBase][quantite];
      const id = `${idBase}-${quantite}g`;
      const nom = `${nomBase} ${quantite}g`;
      ensureSnipcartReady(() => {
        Snipcart.api.cart.items.add({ id, name: nom, price: prix, url: '/', description });
      });
    }
  </script>

  <script>
    let snipcartLoaded = false;
    function loadSnipcart() {
      if (snipcartLoaded) return;
      snipcartLoaded = true;
      const script = document.createElement("script");
      script.src = "https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.js";
      script.async = true;
      document.body.appendChild(script);
    }
    window.addEventListener("scroll", loadSnipcart, { once: true });
    document.addEventListener("click", loadSnipcart, { once: true });
  </script>

  <!-- Lazy/decoding pour toutes les images -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelectorAll('img').forEach(function (img, i) {
        if (!img.hasAttribute('decoding')) img.setAttribute('decoding', 'async');
        if (!img.hasAttribute('loading'))  img.setAttribute('loading', 'lazy');
        if (i > 0 && !img.hasAttribute('fetchpriority')) img.setAttribute('fetchpriority','low');
      });
    });
  </script>

  <footer style="text-align:center; padding:20px; font-size:14px;">
    <a href="./aviso-legal.html">Aviso legal</a> |
    <a href="./politica-privacidade.html">Política de Privacidade</a> |
    <a href="./cookies.html">Cookies</a> |
    <a href="./cgv.html">CGV</a>
  </footer>
</body>
</html>
