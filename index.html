<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Green-Therapy – CBD Premium</title>
  <meta name="description" content="Especialista em CBD premium desde 2019: flores, resinas, óleos e infusões de alta qualidade. Produtos naturais selecionados na Itália.">
  <meta name="robots" content="index, follow">
  <meta name="author" content="Green-Therapy">
  <link rel="icon" href="../favicon.ico" type="image/x-icon" />
  <link rel="icon" type="image/png" href="/favicon.png?v=2">
  <link rel="preconnect" href="https://cdn.snipcart.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="image" href="../images.webp" fetchpriority="high">
  <link rel="stylesheet" href="../style.css?v=99" />
  <link rel="preload" href="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.css"></noscript>
  <script>
    window.SnipcartSettings = {
      publicApiKey: "NTJhZjlkMTMtZmVmYy00MTZmLWFiYzUtZGU1ZDE1ZjZiODAwNjM4ODk3NzU4MjkzMjE0MDQ3",
      loadStrategy: "on-user-interaction"
    };
  </script>
  <script defer src="https://cdn.snipcart.com/themes/v3.0.31/default/snipcart.js"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-9V19J9PKQG"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-9V19J9PKQG');
  </script>
  <style>
    img[loading="lazy"]{content-visibility:auto}
    .product-img{max-width:100%;height:auto}
    .cta-cart{touch-action:manipulation}
    .panier-btn{cursor:pointer}
  </style>
</head>
<body>
<header>
  <div class="logo-container">
    <img src="../logo-rond.png" alt="Logo Green Therapy - CBD Premium" class="logo" loading="lazy" width="80" height="80">
  </div>
  <h1 class="brand-title">Green-Therapy</h1>
  <nav>
    <a href="#home">Início</a>
    <a href="#produits">Produtos</a>
    <a href="#contact">Contato</a>
    <a href="/fr/" hreflang="fr">🇨🇵 Francês</a>
  </nav>
  <div class="header-panier">
    <button class="snipcart-checkout panier-btn">Ver carrinho €</button>
</header>

<section id="home" class="section">
  <h2>
    <span style="display:inline-block; text-align:center;">
      <span style="display:block;">🌿 Green-Therapy 🌿</span>
      <span style="display:block;">CBD Premium</span>
    </span>
  </h2>
  <p>Desde 2019, a Green-Therapy é especializada em produtos de CBD premium. Trabalhamos exclusivamente com produtores selecionados na Itália para oferecer flores, resinas, óleos e infusões de qualidade superior.</p>
</section>

<section id="produits" class="section">
  <h2>🛍️ Nossos Produtos</h2>
  <div class="info-notes">
    <p class="legal-note">Conforme a legislação da UE :</p>
    <p class="legal-mid"><span class="nowrap"><strong>THC &lt; 0,3% 🇪🇺</strong></span></p>
    <p class="legal-sub">sem efeitos psicoativos</p>
    <div class="rule"></div>
    <p class="shipping-note">🧺 <strong>Click & Collect</strong> — disponível das <strong>15h às 18h</strong>.</p>
    <p class="shipping-note"><span class="label">Entrega em Portugal pelos CTT</span> — Taxa fixa: <span class="price">3,50&nbsp;€</span></p>
  </div>
  <div class="product-grid">
    <!-- ====== PRODUITS ====== -->

    <!-- Liste complète des produits avec boutons Viva Payments et crypto -->
    <script>
      const produits = [
        {id:"amnesia-cbd", nom:"Flor CBD Amnesia", prix:{2:10,4:20,6:30,8:40,10:45}},
        {id:"resine-cbd", nom:"Resina CBD Hash", prix:{2:12,4:24,6:36,8:48,10:55}},
        {id:"cherry-cbd", nom:"Flor CBD Cherry", prix:{2:10,4:20,6:30,8:40,10:45}},
        {id:"charas-cbd", nom:"Charas CBD", prix:{2:12,4:24,6:36,8:48,10:55}},
        {id:"cali-dream-cbd", nom:"Cali Dream CBD", prix:{2:10,4:20,6:30,8:40,10:45}},
        {id:"gelato-cbd", nom:"Gelato CBD", prix:{2:10,4:20,6:30,8:40,10:45}},
        {id:"ak47-cbd", nom:"AK-47 CBD", prix:{2:10,4:20,6:30,8:40,10:45}},
        {id:"orange-cookies-cbd", nom:"Orange Cookies CBD", prix:{2:10,4:20,6:30,8:40,10:45}},
        {id:"gorilla-glue-cbd", nom:"Gorilla Glue CBD", prix:{2:10,4:20,6:30,8:40,10:45}}
      ];

      const productGrid = document.querySelector('.product-grid');

      produits.forEach(prod => {
        const card = document.createElement('div');
        card.className = "product-card";
        card.dataset.id = prod.id;
        card.dataset.stock = "10";

        card.innerHTML = `
          <picture>
            <source srcset="./${prod.id}.webp" type="image/webp">
            <img src="./${prod.id}.jpg" alt="${prod.nom} - Itália" class="product-img" loading="lazy" width="400" height="400">
          </picture>
          <h3>🌿 ${prod.nom} 🇮🇹</h3>
          <p>Descrição detalhada para ${prod.nom}, cultivada na Itália. Aroma e propriedades de relaxamento natural. <strong>THC &lt; 0,3%</strong>.</p>
          <p class="price">À partir de ${prod.prix[2]} €</p>
          <select id="${prod.id}-quantite">
            <option value="2">2g – ${prod.prix[2]} €</option>
            <option value="4">4g – ${prod.prix[4]} €</option>
            <option value="6">6g – ${prod.prix[6]} €</option>
            <option value="8">8g – ${prod.prix[8]} €</option>
            <option value="10">10g – ${prod.prix[10]} €</option>
          </select>
          <button class="panier-btn"
            onclick="ajouterProduit('${prod.id}','${prod.nom}','${prod.nom}','${prod.id}-quantite')">🛒 Adicionar ao carrinho</button>
          <button class="panier-btn" id="card-${prod.id}">💳 Pagar com cartão</button>
          <button id="crypto-${prod.id}" type="button" class="panier-btn">₿ Pagar em cripto</button>
        `;
        productGrid.appendChild(card);
      });
    </script>

  </div>
</section>

<!-- Snipcart hidden -->
<div hidden id="snipcart"
  data-api-key="NTJhZjlkMTMtZmVmYy00MTZmLWFiYzUtZGU1ZDE1ZjZiODAwNjM4ODk3NzU4MjkzMjE0MDQ3"
  data-config-modal-style="side"
  data-config-currency="EUR">
</div>

<script>
  const prixParProduit = {
    "amnesia-cbd": {2:10,4:20,6:30,8:40,10:45},
    "resine-cbd": {2:12,4:24,6:36,8:48,10:55},
    "cherry-cbd": {2:10,4:20,6:30,8:40,10:45},
    "charas-cbd": {2:12,4:24,6:36,8:48,10:55},
    "cali-dream-cbd": {2:10,4:20,6:30,8:40,10:45},
    "gelato-cbd": {2:10,4:20,6:30,8:40,10:45},
    "ak47-cbd": {2:10,4:20,6:30,8:40,10:45},
    "orange-cookies-cbd": {2:10,4:20,6:30,8:40,10:45},
    "gorilla-glue-cbd": {2:10,4:20,6:30,8:40,10:45}
  };
  function ensureSnipcartReady(cb){ if(window.Snipcart && window.Snipcart.api) cb(); else document.addEventListener('snipcart.ready', cb); }
  function ajouterProduit(idProduit, nom, desc, selectId){
    const sel=document.getElementById(selectId);
    if(!sel) return alert("Choix introuvable.");
    const g=parseInt(sel.value,10);
    const prix=prixParProduit[idProduit]?.[g];
    if(!prix) return alert("Prix introuvable.");
    const item={id:`${idProduit}-${g}g`,name:`${nom} ${g}g`,price:Number(prix).toFixed(2),url:"https://green-therapy-cbd.vercel.app/index.html",description:desc||""};
    ensureSnipcartReady(()=>{Snipcart.api.cart.items.add(item).catch(()=>alert("Impossible d'ajouter au panier. Réessaie."));});
  }
</script>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const produitsIds = ["amnesia-cbd","resine-cbd","cherry-cbd","charas-cbd","cali-dream-cbd","gelato-cbd","ak47-cbd","orange-cookies-cbd","gorilla-glue-cbd"];
    produitsIds.forEach(id => {
      const btn = document.getElementById(`card-${id}`);
      const sel = document.getElementById(`${id}-quantite`);
      if(btn && sel){
        btn.addEventListener("click", ()=>{
          const q = parseInt(sel.value,10) || 2;
          const montant = prixParProduit[id][q]*100; // en cents pour VivaPayments
          window.location.href=`https://www.vivapayments.com/web/checkout/7811?amount=${montant}&currency=978`;
        });
      }
    });
  });
</script>

</body>
</html>
